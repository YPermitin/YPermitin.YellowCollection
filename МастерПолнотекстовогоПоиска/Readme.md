# Мастер полнотекстового поиска

Набор инструментов для работы с полнотекстовым индексом платформы 1С. Стандартные и расширенные возможности.

Материалы по другим темам Вы можете найти на сайте [ypermitin.github.io](https://ypermitin.github.io/), а новости по проектам или новым материалам в [Telegram-канале](https://t.me/TinyDevVault).

## Состав

* [media](media) - медиафайлы для документации данной разработки.
* [src](src) - файлы исходного кода.

## Назначение и возможности

Как показала жизнь, практика и "вот это все" - штатный движок полнотекстового поиска достаточно эффективно может решать задачи оптимизации поиска данных в информационной базе. Главное уметь его готовить. Не важно - файловая у Вас база или клиент-серверная. Полнотекстовый поиск ожидает своего включения и обслуживания. А если все настроено грамотно, то это значительно улучшит отклик системы в операциях поиска (в динамических списках, поиск при вводе по строке и другое).

Конечно, у этой функциональности есть и недостатки, такие как: необходимость следить за его обслуживанием и работоспособностью, разбирать "странные" баги, уметь правильно его сопровождать при обновлении платформы, знать связанный функционал в БСП и т.д. Детали выходят за рамки этой публикации.

![1. Пример работы обработки](./media/1.%20%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8.gif)

Сейчас Вы видите перед собой инструмент, который позволит управлять полнотекстовым индексом удобным способом, а также отслеживать его состояние с получением более детальной информации. Сравните сами разницу между штатной обработкой обслуживания полнотекстового индекса и этим инструментом.

Для большинства задач хватит и штатного функционала, но иногда все же нужно немного больше, особенно если Вы отслеживаете работу ППД.

Основными возможностями инструмента являются:

* Поддержка штатных операций с индексом:
    * Включение / отключение использования полнотекстового индекса
    * Полное обновление индекса.
    * Частичное обновление (частичного индекса).
    * Слияние частичного и полного индекса.
    * Очистка индекса.
* Отслеживание состояния индекса:
    * Дата актуальности индекса.
    * Проверка необходимости обновления данных в индексе.
    * Проверка необходимости слияния частичного и полного индекса.
* Настройки формирования индекса (доступность настроек зависит от версии платформы):
    * Количество заданий индексирования.
    * Максимальный размер индексируемых данных.
    * Режим разделения составных слов.
* Расширенная информация
    * Путь к каталогу полнотекстового индекса (инструмент определяет его автоматически, но Вы всегда можете указать его вручную при необходимости).
    * Размер каталога полнотекстового поиска.
    * Состав объектов метаданных и их полей, которые входят в состав индексируемых данных.
    * Очередь объектов к обновлению для попадания в полнотекстовый индекс.
    * Информация о файлах в каталоге индекса ППД.
* Подсказки на каждую операцию
* Подтверждение действий над индексом (почему-то штатные инструменты начинают свою работу без каких-либо вопросов. Стоит случайно нажать и полнотекстовый индекс очищен прямо во время рабочего дня!).

## Требования

Минимальные требования к работе:

* Платформа 1С версии 8.3.5 и выше.
* Режим работы не имеет значения (клиент-серверный или файловая база. СУБД не имеет значения).
* Только управляемые формы. Для использования в обычном приложении используйте известные обходные пути.
* Расширенные возможности работают только для Windows (сервер 1С должен быть на этой ОС).

Это экспериментальный инструмент и в нем могут быть ошибки, над которыми я еще работаю. Буду развивать его дальше, а пока еще немного информации.

## Принцип работы

Принципы работы очень просты:

* Штатные возможности платформы 1С в виде менеджера полнотекстового поиска.
* Расширенные возможности в виде определения каталога индекса ППД.
* Анализ файлов из каталога индекса ППД.
* А также анализ объектов метаданных с полнотекстовым поиском.

Скорее всего вопросов у Вас не останется. Вы же используете полнотекстовый поиск? И понимаете, что это собственный движок платформы 1С и никакой полнотекстовый поиск СУБД SQL Server или PostgreSQL не используется?

## Отступление вместо заключения

Инструмент создавался для удобной работы с индексом полнотекстового поиска. Использовать его или нет - решайте сами. 

У этой разработки есть и другая особенность. Она полностью сделана в 1C:Enterprise Development Tools версии 1.16. Я много раз пытался попробовать его в полноценной разработке и этот момент настал. Лучше бы я его не использовал :) Надеямся на новые, более адекватные версии.